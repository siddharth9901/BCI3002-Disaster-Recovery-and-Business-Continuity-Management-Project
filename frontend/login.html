<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Critical Application</title>
    <link href="css/style.css" rel="stylesheet" />
    <link href="bootstrap_theme/bootstrap.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="blocks.css" />
    <script>
        function login() {
            console.log("working")
            var xhr = new XMLHttpRequest()
            xhr.open("POST", "http://127.0.0.1:5000/login");
            xhr.onload = function (event) {
                //alert("The server says: " + event.target.response);
                var json = JSON.parse(event.target.response)
                console.log(json)
                if (json.auth == "success") {
                    localStorage.setItem("token", json.token)
                    window.location.href = ("logedin.html");
                } else {
                    document.getElementById('login_res').innerHTML = json.error;
                }
            };
            var formData = new FormData(document.getElementById("login"));
            xhr.send(formData);
            //document.getElementById('frame').style = { "display": "flex" }
        }
            // function setToken() {
            //     console.log("set token called")
            //     setTimeout(console.log("Frame", document.getElementById("frame").innerHTML), 200)

            //     if (document.getElementById("frame").innerHTML.startsWith('{')) {
            //         var json = JSON.parse(document.getElementById("frame").innerHTML)
            //         console.log(json)
            //         if (json.auth == "success") {
            //             localStorage.setItem("token", json.token)
            //             window.location.href = ("logedin.html");
            //         }
            //     }
        //}
    </script>
</head>

<body>
    <nav class="bg-primary navbar navbar-dark navbar-expand-lg py-4 py-lg-2 text-uppercase">
        <div class="container"> <a class="fw-bold navbar-brand" href="index.html">Business Critical Application</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNavDropdown-21" aria-controls="navbarNavDropdown-21" aria-expanded="false"
                aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse " id="navbarNavDropdown-21">
                <ul class="mb-2 mb-lg-0 ms-auto navbar-nav">
                    <li class="nav-item"> <a class="nav-link px-lg-3 py-lg-4 text-white" href="login.html">Login</a>
                    </li>
                    <li class="nav-item"> <a class="nav-link px-lg-3 py-lg-4 text-white" href="signup.html">Sign Up</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <svg viewBox="0 0 1440 185" preserveAspectRatio="none" fill="currentColor" version="1.1"
            xmlns="http://www.w3.org/2000/svg" class="d-block text-primary" width="100%" height="25">
            <path d="M 0 0 H 1440 V 60 C 1114 355 700 35 516 35 C 333 35 246 199 0 60 V 0 Z" />
        </svg>
    </div>
    <div>
    </div>
    <div>
        <section class="bg-light">
            <div class="container pb-5 pt-5">
                <div class="col-md-9 col-xl-8 ms-auto me-auto">
                    <div class="bg-white p-4 p-lg-5">
                        <h2 class="mb-1 text-dark">Login</h2>
                        <p class="mb-4">Please Enter your credentials to login.</p>
                        <form target="hiddenFrame" onSubmit="login()" id="login">
                            <!-- action="http://127.0.0.1:5000/login" method="post" -->
                            <div class="mb-3">
                                <div class="input-group"><span class="bg-light input-group-text"
                                        id="addon-wrapping1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                            fill="currentColor" width="1em" height="1em">
                                            <g>
                                                <path fill="none" d="M0 0h24v24H0z"></path>
                                                <path
                                                    d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm17 4.238l-7.928 7.1L4 7.216V19h16V7.238zM4.511 5l7.55 6.662L19.502 5H4.511z">
                                                </path>
                                            </g>
                                        </svg></span>
                                    <input type="email" class="form-control" placeholder="Email" name="email"
                                        aria-label="User Email" aria-describedby="addon-wrapping1" required />
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="input-group"><span class="bg-light input-group-text"
                                        id="addon-wrapping2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                            fill="currentColor" width="1em" height="1em">
                                            <g>
                                                <path fill="none" d="M0 0h24v24H0z"></path>
                                                <path
                                                    d="M10.758 11.828l7.849-7.849 1.414 1.414-1.414 1.415 2.474 2.474-1.414 1.415-2.475-2.475-1.414 1.414 2.121 2.121-1.414 1.415-2.121-2.122-2.192 2.192a5.002 5.002 0 0 1-7.708 6.294 5 5 0 0 1 6.294-7.708zm-.637 6.293A3 3 0 1 0 5.88 13.88a3 3 0 0 0 4.242 4.242z">
                                                </path>
                                            </g>
                                        </svg></span>
                                    <input type="password" class="form-control" placeholder="Password" name="password"
                                        aria-label="Password" aria-describedby="addon-wrapping2" required />

                                </div>
                            </div>
                            <div class="input-group"><span class="bg-light input-group-text" id="addon-wrapping2"><svg
                                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                        width="1em" height="1em">
                                        <g>
                                            <path fill="none" d="M0 0h24v24H0z"></path>
                                            <path
                                                d="M10.758 11.828l7.849-7.849 1.414 1.414-1.414 1.415 2.474 2.474-1.414 1.415-2.475-2.475-1.414 1.414 2.121 2.121-1.414 1.415-2.121-2.122-2.192 2.192a5.002 5.002 0 0 1-7.708 6.294 5 5 0 0 1 6.294-7.708zm-.637 6.293A3 3 0 1 0 5.88 13.88a3 3 0 0 0 4.242 4.242z">
                                            </path>
                                        </g>
                                    </svg></span>
                                <input type="password" class="form-control" placeholder="otp" name="otp"
                                    aria-label="Password" aria-describedby="addon-wrapping2" />

                            </div>
                    </div>
                    <!-- <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="exampleCheck1" />
                                <label class="form-check-label" for="exampleCheck1">Remember me</label>
                            </div> -->
                    <button type="submit" class="btn d-block w-100 btn-primary fw-bold pb-2 ps-3 pe-3 pt-2">Sign
                        In</button>
                    <div class="text-center">
                        <h1 id="login_res" class="text-danger"> </h1>
                    </div>
                    </form>
                    <iframe src="#" frameborder="0" style="display: none;" name="hiddenFrame" id="frame">
                    </iframe>
                </div>
            </div>
    </div>
    </section>
    <script></script>
    <svg viewBox="0 0 100 100" preserveAspectRatio="none" fill="currentColor" version="1.1"
        xmlns="http://www.w3.org/2000/svg" width="100%" class="bg-primary d-block text-warning" height="50">
        <path d="M 0 100 V 40 L 100 100" />
        <path d="M 100 100 V 0 L 0 100" opacity="0.5" />
    </svg>
    </div>
    <footer class="bg-light pt-5 text-secondary">
        <div class="container">
            <div class="row">
                <div class="col-lg col-md col-sm col-xl col-xxl me-auto py-3"> <a href="#"
                        class="d-inline-block h2 mb-4 text-decoration-none text-uppercase"> Business Critical
                        Application </a>
                    <p class="mb-3"> This application must remain accessible at all times.</p>
                    <div class="mb-4"> <a href="#" class="text-secondary">+1 234 567-890</a> <br /> <a href="#"
                            class="text-secondary">DRBCM@mail.com</a>
                    </div>

                </div>
                <div class="col-lg col-md col-sm col-xl col-xxl py-3">
                    <h2 class="fw-bold h5 mb-4 text-primary text-uppercase">Made By</h2>
                    <ul class="list-unstyled">
                        <li class="mb-3"> <a href="#" class="text-secondary">Vasu Mandhanya 19BCI0161</a>
                        </li>
                        <li class="mb-3"> <a href="#" class="text-secondary">Siddharth Dinkar 19BCI0122</a>
                        </li>
                        <li class="mb-3"> <a href="#" class="text-secondary">Yuvraj Singh Pathania 19BCI0561</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="pb-3 pt-3 text-center">
                <hr class="mt-0 " />
                <p class="mb-0">Business Critical Application</p>
            </div>
        </div>
    </footer>
</body>

</html>