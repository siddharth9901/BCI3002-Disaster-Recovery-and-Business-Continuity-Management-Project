<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Critical Application</title>
    <link href="css/style.css" rel="stylesheet" />
    <link href="bootstrap_theme/bootstrap.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="blocks.css" />
    <script>
        function signup() {
            console.log("working")
            var xhr = new XMLHttpRequest()
            xhr.open("POST", "http://127.0.0.1:5000/signup");
            xhr.onload = function (event) {
                // confirm("The server says: " + event.target.response);
                var json = JSON.parse(event.target.response)
                console.log(json)
                if (json.auth == "success") {
                    //localStorage.setItem("token", json.token)
                    //window.location.href = ("login.html");
                    disp = document.getElementById("signup");
                    disp.remove();
                    heading = document.getElementById("reshead");
                    heading.innerHTML = "Please Save your secret key:";
                    secret = document.getElementById("secret");
                    secret.innerHTML = json.secret;
                    //confirm("Please Save your secret key: " + json.secret)
                }
                else {
                    document.getElementById('signup_res').innerHTML = json.error;


                }
            };
            var formData = new FormData(document.getElementById("signup"));
            xhr.send(formData);
            //document.getElementById('frame').style = { "display": "flex" }
        }
    </script>
</head>

<body>
    <nav class="bg-primary navbar navbar-dark navbar-expand-lg py-4 py-lg-2 text-uppercase">
        <div class="container"> <a class="fw-bold navbar-brand" href="#">Business Critical Application</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNavDropdown-21" aria-controls="navbarNavDropdown-21" aria-expanded="false"
                aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse " id="navbarNavDropdown-21">
                <ul class="mb-2 mb-lg-0 ms-auto navbar-nav">
                    <li class="nav-item"> <a class="nav-link px-lg-3 py-lg-4 text-white" href="login.html">Login</a>
                    </li>
                    <li class="nav-item"> <a class="nav-link px-lg-3 py-lg-4 text-white" href="signup.html">Sign Up</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <svg viewBox="0 0 1440 185" preserveAspectRatio="none" fill="currentColor" version="1.1"
            xmlns="http://www.w3.org/2000/svg" class="d-block text-primary" width="100%" height="25">
            <path d="M 0 0 H 1440 V 60 C 1114 355 700 35 516 35 C 333 35 246 199 0 60 V 0 Z" />
        </svg>
    </div>
    <div>
    </div>
    <div>
        <section class="bg-light">
            <div class="container pb-5 pt-5"> <a href="#"
                    class="d-inline-block h2 mb-4 text-decoration-none text-uppercase"> Sign Up</a>
                <form onSubmit="signup()" target="hiddenFrame" id="signup">
                    <div class="row">
                        <div class="mb-3 col-md-6">
                            <label class="form-label" for="inputFirstName">First Name</label>
                            <input type="text"
                                class="bg-light border-start-0 border-end-0 border-top-0 form-control ps-0 pe-0 rounded-0"
                                name="first" id="inputFirstName" placeholder="Enter first name..." required />
                        </div>
                        <div class="mb-3 col-md-6">
                            <label class="form-label" for="inputLastName">Last Name</label>
                            <input type="text"
                                class="bg-light border-start-0 border-end-0 border-top-0 form-control ps-0 pe-0 rounded-0"
                                name="last" id="inputLastName" placeholder="Enter last name..." required />
                        </div>
                    </div>
                    <div class="row">
                        <div class="mb-3 col-md-6">
                            <label class="form-label" for="inputEmail">Email</label>
                            <input type="email"
                                class="bg-light border-start-0 border-end-0 border-top-0 form-control ps-0 pe-0 rounded-0"
                                name="email" id="inputEmail" placeholder="Enter email..." required />
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label" for="inputCompany">Company</label>
                            <input type="text"
                                class="bg-light border-start-0 border-end-0 border-top-0 form-control ps-0 pe-0 rounded-0"
                                name="company" id="inputCompany" placeholder="Enter company name..." required />
                        </div>
                    </div>
                    <div class="row">
                        <div class="mb-3 col-md-6">
                            <label class="form-label" for="inputpassword">Password</label>
                            <input type="password"
                                class="bg-light border-start-0 border-end-0 border-top-0 form-control ps-0 pe-0 rounded-0"
                                name="password" id="inputpassword" placeholder="Enter password..." required />
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label" for="confirmpassword">Confirm Password</label>
                            <input type="password"
                                class="bg-light border-start-0 border-end-0 border-top-0 form-control ps-0 pe-0 rounded-0"
                                name="confirmpassword" id="confirmpassword" placeholder="Confirm password..."
                                required />
                        </div>
                    </div>
                    <div class="text-end">
                        <button type="submit" class="btn btn-primary ps-4 pe-4 rounded-0 rounded-pill text-uppercase">
                            <span class="align-middle">Submit</span>
                            <svg viewBox="0 0 24 24" fill="currentColor" height="16" width="16" class="ms-1">
                                <path
                                    d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="text-center">
                        <h1 id="signup_res" class="text-danger"> </h1>
                    </div>
                </form>
                <div class="pb-3 pt-3 text-center">
                    <h1 class="text-primary" id="reshead">

                    </h1>
                    <hr class="mt-0 " />
                    <p class="mb-0" id="secret"></p>
                </div>
                <iframe src="#" frameborder="0" style="display: none;" name="hiddenFrame"></iframe>
            </div>
        </section>
        <svg viewBox="0 0 100 100" preserveAspectRatio="none" fill="currentColor" version="1.1"
            xmlns="http://www.w3.org/2000/svg" width="100%" class="bg-primary d-block text-warning" height="50">
            <path d="M 0 100 V 40 L 100 100" />
            <path d="M 100 100 V 0 L 0 100" opacity="0.5" />
        </svg>
    </div>
    <footer class="bg-light pt-5 text-secondary">
        <div class="container">
            <div class="row">
                <div class="col-lg col-md col-sm col-xl col-xxl me-auto py-3"> <a href="#"
                        class="d-inline-block h2 mb-4 text-decoration-none text-uppercase"> Business Critical
                        Application </a>
                    <p class="mb-3"> This application must remain accessible at all times.</p>
                    <div class="mb-4"> <a href="#" class="text-secondary">+1 234 567-890</a> <br /> <a href="#"
                            class="text-secondary">DRBCM@mail.com</a>
                    </div>
                </div>
                <div class="col-lg col-md col-sm col-xl col-xxl py-3">
                    <h2 class="fw-bold h5 mb-4 text-primary text-uppercase">Made By</h2>
                    <ul class="list-unstyled">
                        <li class="mb-3"> <a href="#" class="text-secondary">Vasu Mandhanya 19BCI0161</a>
                        </li>
                        <li class="mb-3"> <a href="#" class="text-secondary">Siddharth Dinkar 19BCI0122</a>
                        </li>
                        <li class="mb-3"> <a href="#" class="text-secondary">Yuvraj Singh Pathania 19BCI0561</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="pb-3 pt-3 text-center">
                <hr class="mt-0 " />
                <p class="mb-0">Business Critical Application</p>
            </div>
        </div>
    </footer>
</body>

</html>